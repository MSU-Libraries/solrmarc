record: specTestRecs.mrc(u8)
indexSpec: id = 001, first
expect: u8


record: 1156470.mrc
indexSpec: 035a, map("[(][Oo][Cc][Oo][Ll][Cc][)][^0-9]*[0]*([0-9]+)=>$1","ocm[0]*([0-9]+)[ ]*[0-9]*=>$1","ocn[0]*([0-9]+).*=>$1", "on[0]*([0-9]+).*=>$1")
expect: 12275114


# test loading a indexspec that references a pattern map defined in the same properties file
record: 1156470.mrc
indexSpec: oclc_pattern_map_test.properties(oclc_num)
expect: 12275114


record: 1156470.mrc
indexSpec: oclc_p_num = 035a, oclc_num_pattern_map.properties(oclc_num)
expect: 12275114


record: specTestRecs.xml
indexSpec: subject_facet =600[a-z]:610[a-z]:611[a-z]:630[a-z]:650[a-z]:651[a-z]:655[a-z]:690[a-z], join (" -- "), cleanEnd, unique
expect: Translating and interpreting -- Soviet Union -- History|Russian literature -- Translations from foreign languages -- History and criticism


record: title_k.mrc
indexSpec: custom, getSortableTitle
expect: morton hoffman papers


# test with unicode normalization turned on
readerProps: marc.permissive=true, marc.to_utf_8=true, marc.unicode_normalize=C 
record: u4.mrc(u4) 
indexSpec: 245a 
#The princes of H\u00E0-ti\u00EAn (1682-1867) /
expect: The princes of Hà-tiên (1682-1867) /


# same test with unicode normalization turned off
readerProps: marc.permissive=true, marc.to_utf_8=true, marc.unicode_normalize=false 
record: u4.mrc(u4)
indexSpec: 245a
#The princes of Ha\u0300-tie\u0302n (1682-1867) /
expect: The princes of Hà-tiên (1682-1867) /

#test reading XML file with initial BOM
record: specTestRecs_withBOM.xml(u55)
indexSpec: id = 001, first
expect: u55

#test reading XML file with no prolog
record: specTestRecs_no_Prolog.xml(u10489)
indexSpec: id = 001, first
expect: u10489

#test reading single record Koha XML file without <collection> 
record: 1474920681_KOHA_LFL_5.xml
indexSpec: id = 245a
expect: Cinema and architecture : from historical to digital /

#test reading single record Koha XML file without <collection> that starts with a comment
record: 1474920681_KOHA_LFL_6_with_comment.xml
indexSpec: id = 245a, cleanEnd
expect: Cinema and architecture : from historical to digital

#Test running a bean shell script
record: u399.mrc
indexSpec: pubdategroup = script(PubDateGroups.bsh), getPubDateGroups
expect: Last 50 years

record: u55.mrc
indexSpec: custom, getCallNumbersCleanedNewNo050(true)
expect: PR4231.A43 1984 (13 volumes)

record: u60.mrc
indexSpec: custom, getCallNumbersCleanedNewNo050(true)
expect: DP269.27.S67 H47 1982  V.1, V.2

record: u60.mrc
indexSpec: 999i
expect: X000872036|X000872037

record: u8738.mrc
indexSpec: language_facet.properties(language_facet)
expect: English|French (translated from)

record: u392.mrc
indexSpec: language_facet.properties(language_facet)
expect: Russian|English (also in)

#testing the interaction of stripInd2 and substring
# the field value is : 245 13$aAn introduction to Vietnamese literature /
record: u8738.mrc
indexSpec: title_start = 245a, substring(0,5), stripInd2
expect: intro

#testing the interaction of stripInd2 and position based selection [num1, num2]
# the field value is : 245 13$aAn introduction to Vietnamese literature /
# note the position based selection operation extracts from num1 to num2
# whereas the substring(num1, num2) extracts from num1 to num2-1
record: u8738.mrc
indexSpec: title_start = 245a[0-4], stripInd2
expect: intro

#testing the interaction of stripInd2, substring and separate
# the field value is : 245 13$aAn introduction to Vietnamese literature /$cMaurice M. Durand and Nguyen Tran Huan
record: u8738.mrc
indexSpec: title_part3 = 245[ac], substring(0,5), separate, stripInd2
expect: intro|Mauri

#testing error correction of Russian record with erroneous subfield separator in the middle of a Cyrillic string
record: u5278992.mrc
indexSpec: pub = LNK260b, first, clean
expect: ЭКсмо

#testing error correction of Russian record with erroneous subfield separator in the middle of a Cyrillic string
readerProps: marc.permissive=false, marc.to_utf_8=true 
record: u5278992.mrc
indexSpec: pub = LNK260b, first, clean
expect: 
